<h1>
<ng-pluralize count="tasks.length"
                 when="{'0': 'Sorry, there are no tasks',
                     'one': 'Listing 1 Task.',
                     'other': 'Listing {} Tasks'}">
</ng-pluralize>
</h1>

<table class="table">
  <tr>
    <th>Id</th>
    <th>Deadline</th>
    <th>Assignee</th>
    <th>Phone</th>
    <th>State</th>
    <th></th>
    <th></th>
  </tr>

  <tr ng-repeat="task in tasks" ng-class="{'info' : task.state == 1, 'danger' : task.state == 2, 'success' : task.state == 3}">
    <td>{{task.id}}</td>
    <td>{{task.deadline}}</td>
    <td>{{task.assigned_name}}</td>
    <td>{{task.assigned_phone}}</td>
    <td>{{getStateName(task.state)}}</td>
    <td>
      <a href="" ng-click="setCurrent(task.id)" class="btn">
        Show
      </a>
    </td>
  </tr>
</table>

<div ng-show="currentLog!=null">
<h2>History log for task {{currentLog[0].id_task}}</h2>
<table ng-show="currentLog.length>0" class="table">
  <tr>
    <th>Date</th>
    <th>State</th>
    <th>Who</th>
  </tr>

  <tr ng-repeat="log in currentLog" ng-class="{'info' : log.state == 1, 'danger' : log.state == 2, 'success' : log.state == 3}">
    <td>{{log.time}}</td>
    <td>{{getStateName(log.state)}}</td>
    <td>{{log.action_taker}}</td>
  </tr>
</table>
<div ng-show="currentLog.length==0">
    <p class="lead">
        Sorry, no log for this task
    </p>
</div>
</div>